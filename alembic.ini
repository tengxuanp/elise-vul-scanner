# alembic.ini
# Alembic configuration file for the project's database migrations.

[alembic]
# Path to migration scripts (env.py + versions/).
script_location = backend/migrations

# Where individual revision files are stored (default is "versions" under script_location).
# You can keep the default layout, this line is optional/documentary.
version_locations = backend/migrations/versions

# Name template for new revision files. Options include:
#   %(rev)s, %(rev_timestamp)s, %(slug)s, %(year)s, %(month)s, %(day)s
file_template = %%(rev_timestamp)s_%%(slug)s

# Truncate overly long slugs in filenames.
truncate_slug_length = 40

# Timestamps written in migration headers.
timezone = UTC

# Encoding for output files.
output_encoding = utf-8

# -----------------------------------------------------------------------------
# Database URL
# -----------------------------------------------------------------------------
# For local/dev, SQLite file under ./data:
sqlalchemy.url = sqlite:///./data/app.db

# In production, you typically pass DATABASE_URL via env and let env.py read it.
# Leave this value as a harmless default; env.py can override it at runtime.


# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------

[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(asctime)s %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %Y-%m-%d %H:%M:%S


# -----------------------------------------------------------------------------
# Optional: auto-format new migration files after generation (if tools installed)
# -----------------------------------------------------------------------------
[post_write_hooks]
hooks = black,isort

[post_write_hooks.black]
type = console_scripts
entrypoint = black
# Adjust line length to your code style
options = -l 100

[post_write_hooks.isort]
type = console_scripts
entrypoint = isort
options = --profile black
